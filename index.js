(function(){"use strict";function o(t,e,n,r,_,Ze,et,tt){var c=typeof t=="function"?t.options:t;return e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),{exports:t,options:c}}const i={props:["content"],computed:{required(){return this.content.required},label(){return this.content.label||this.content.name},defaultValue(){return this.content.default},empty(){return this.content.empty},options(){var t;return(t=this.content.options)==null?void 0:t.map(({value:e,text:n})=>({value:e,text:n||e}))}}};var l=function(){var e=this,n=e._self._c;return n(e.component,{tag:"component",staticClass:"kf-field-preview",class:{required:e.required},style:`--kf-field-name: '${e.content.name}'`,attrs:{time:!1,placeholder:e.content.placeholder,label:e.label,value:e.defaultValue,buttons:e.buttons,options:e.options,empty:e.empty}})},f=[],d=o(i,l,f);const s=d.exports,a=Object.freeze(Object.defineProperty({__proto__:null,default:s},Symbol.toStringTag,{value:"Module"}));var u=o({extends:s,computed:{component:()=>"k-choice-input"}},null,null);const m=u.exports,p=Object.freeze(Object.defineProperty({__proto__:null,default:m},Symbol.toStringTag,{value:"Module"}));var $=o({extends:s,computed:{component:()=>"k-checkboxes-field",defaultValue(){var t;return(t=this.content.default)==null?void 0:t.split(",").map(e=>e.trim())}}},null,null);const b=$.exports,v=Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"}));var g=o({extends:s,computed:{component:()=>"k-date-field"}},null,null);const y=g.exports,x=Object.freeze(Object.defineProperty({__proto__:null,default:y},Symbol.toStringTag,{value:"Module"}));var F=o({extends:s,computed:{component:()=>"k-email-field"}},null,null);const h=F.exports,k=Object.freeze(Object.defineProperty({__proto__:null,default:h},Symbol.toStringTag,{value:"Module"}));var w=o({extends:s,computed:{component:()=>"k-number-field"}},null,null);const O=w.exports,S=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));var R=o({extends:s,computed:{component:()=>"k-radio-field"}},null,null);const j=R.exports,z=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));var T=o({extends:s,computed:{component:()=>"k-select-field"}},null,null);const I=T.exports,C=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));var M=o({extends:s,computed:{component:()=>"k-tel-field"}},null,null);const P=M.exports,D=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}));var q=o({extends:s,computed:{component:()=>"k-text-field"}},null,null);const L=q.exports,E=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}));var V=o({extends:s,computed:{component:()=>"k-textarea-field",buttons:()=>!1}},null,null);const H=V.exports,N=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));var W=o({extends:s,computed:{component:()=>"k-time-field"}},null,null);const U=W.exports,A=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));var B=o({extends:s,computed:{component:()=>"k-url-field"}},null,null);const G=B.exports,J=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"})),K=Object.freeze({import(t){return Object.entries(t).reduce((n,[r,_])=>(n[Q(r)]=_.default,n),{})}});function Q(t){return t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")).toLowerCase()}const X={extends:"k-slug-field",data(){return{inputIsFocused:!1}},computed:{wizardText(){const{text:t}=this.wizard??{};return t.includes(".")?this.$t(t):t}},methods:{onWizard(){var n;const t=(n=this.wizard)==null?void 0:n.field;if(!t)return;let e=this.formData[t.toLowerCase()];e.toLowerCase()==="website"?this.slug="website_url":e&&(this.slug=e)}},watch:{value(t){t.toLowerCase()==="website"&&!this.inputIsFocused&&(t="website_url"),this.slug=t}}};var Y=function(){var e=this,n=e._self._c;return n("k-field",e._b({staticClass:"k-slug-field kf-field-identifier",attrs:{input:e._uid,help:e.preview},scopedSlots:e._u([e.wizard&&e.wizard.text?{key:"options",fn:function(){return[n("k-button",{attrs:{text:e.$t(e.wizard.text),icon:"wand"},on:{click:e.onWizard}})]},proxy:!0}:null],null,!0)},"k-field",e.$props,!1),[n("k-input",e._g(e._b({ref:"input",attrs:{id:e._uid,value:e.slug,theme:"field",type:"form-identifier"},on:{focus:function(r){e.inputIsFocused=!0},blur:function(r){e.inputIsFocused=!1}}},"k-input",e.$props,!1),e.$listeners)),e.value==="website"?n("k-box",{staticStyle:{"margin-top":"1rem"},attrs:{theme:"negative"}},[e._v(e._s(e.$t("arnoson.kirby-forms.reserved-identifier"))+" ")]):e._e()],1)},Z=[],ee=o(X,Y,Z);const te=ee.exports;var ne=o({extends:"k-slug-input",data(){return{wasEmptyOnCreate:!1}},created(){this.wasEmptyOnCreate=!this.value},computed:{sync(){return this.wasEmptyOnCreate?this.$options.propsData.sync:null}},methods:{sluggify(t){var e;return this.$helper.slug(t,[this.slugs,((e=this.$system)==null?void 0:e.ascii)??this.$panel.system.ascii],this.allow,"_")}}},null,null);const oe=ne.exports,se={props:{formId:String,entryId:String,formData:Object,label:String},methods:{download(){const t=this.entryId?`kirby-forms/export/${this.formId}/${this.entryId}`:`kirby-forms/export/${this.formId}`;window.location.pathname=t}}};var re=function(){var e=this,n=e._self._c;return n("k-button",{attrs:{variant:"filled",icon:"download"},on:{click:function(r){return e.download()}}},[e._v(" "+e._s(e.label)+" ")])},_e=[],ce=o(se,re,_e);const ie=ce.exports,le={extends:"k-select-field",props:["formData"],computed:{emailFieldOptions(){const t=[];for(const e of this.formData.form_fields)for(const n of e.columns)for(const{type:r,content:_}of n.blocks)r==="form-field-email"&&t.push({value:_.name,text:_.label});return t}}};var fe=function(){var e=this,n=e._self._c;return n("k-field",e._b({staticClass:"k-select-field",attrs:{input:e.id}},"k-field",e.$props,!1),[n("k-input",e._g(e._b({ref:"input",attrs:{options:e.emailFieldOptions,type:"select"}},"k-input",e.$props,!1),e.$listeners))],1)},de=[],ae=o(le,fe,de);const ue=ae.exports;window.panel.plugin("arnoson/kirby-forms",{blocks:K.import(Object.assign({"./previews/form-field-checkbox.vue":p,"./previews/form-field-checkboxes.vue":v,"./previews/form-field-date.vue":x,"./previews/form-field-email.vue":k,"./previews/form-field-number.vue":S,"./previews/form-field-radio.vue":z,"./previews/form-field-select.vue":C,"./previews/form-field-tel.vue":D,"./previews/form-field-text.vue":E,"./previews/form-field-textarea.vue":N,"./previews/form-field-time.vue":A,"./previews/form-field-url.vue":J,"./previews/form-field.vue":a})),fields:{"form-identifier":te,"form-export":ie,"form-email-select":ue},components:{"k-form-identifier-input":oe}})})();
